# DevSafe GUI — Test Cases

Version: 1.0  
Status: APPROVED  
Related TZ: 01_TZ.md  
Owner: Viktor Kulichenko  
Date: 2026-01-01

---

## 1. Общие принципы тестирования

- тестируется **поведение системы**, а не реализация
- тесты описывают **ожидаемый результат**
- тесты независимы от языка и библиотек
- любой тест можно проверить вручную

---

## 2. Acceptance Tests (основные сценарии)

### AT-01 — Добавление проекта

**Given**  
DevSafe запущен, список проектов пуст

**When**  
Пользователь добавляет проект с параметрами:
- project path
- git remote
- branch
- backup path

**Then**
- проект появляется в списке
- проект сохранён в конфигурации
- проект не активен по умолчанию

---

### AT-02 — Ограничение в 5 проектов

**Given**  
В системе уже добавлено 5 проектов

**When**  
Пользователь пытается добавить 6-й проект

**Then**
- проект не добавляется
- пользователь видит сообщение об ошибке
- состояние системы не меняется

---

### AT-03 — Активация проекта

**Given**  
В системе есть несколько проектов

**When**  
Пользователь выбирает один проект и нажимает "Start"

**Then**
- выбранный проект становится активным
- все остальные проекты деактивированы
- запускается file watcher только для активного проекта

---

### AT-04 — Удаление проекта из отслеживания

**Given**  
Проект добавлен в систему

**When**  
Пользователь нажимает "Remove from tracking"

**Then**
- проект исчезает из списка
- файлы проекта на диске не удаляются
- git-репозиторий проекта не затрагивается

---

## 3. File Watcher Tests

### WT-01 — Реакция на изменение файла

**Given**  
Проект активен

**When**  
Пользователь изменяет и сохраняет файл в проекте

**Then**
- изменение фиксируется системой
- создаётся git commit
- запускается резервное копирование

---

### WT-02 — Игнорирование системных директорий

**Given**  
Проект активен

**When**  
Изменения происходят в:
- `.git`
- `.venv`
- `__pycache__`
- `node_modules`

**Then**
- коммит не создаётся
- бэкап не запускается

---

### WT-03 — Debounce (агрегация изменений)

**Given**  
Проект активен

**When**  
Пользователь быстро сохраняет файл несколько раз подряд

**Then**
- создаётся **один** коммит
- система не создаёт серию мелких коммитов

---

## 4. Git Operation Tests

### GT-01 — Создание коммита

**Given**  
В проекте есть незакоммиченные изменения

**When**  
DevSafe обрабатывает изменения

**Then**
- выполняется `git add`
- выполняется `git commit`
- сообщение коммита содержит timestamp
- commit появляется в истории

---

### GT-02 — Push в GitHub

**Given**  
GitHub доступен

**When**  
Создан новый коммит

**Then**
- выполняется `git push` в указанную ветку
- commit появляется в удалённом репозитории

---

### GT-03 — Ошибка push (нет интернета)

**Given**  
Нет доступа к GitHub

**When**  
Создаётся коммит

**Then**
- commit создаётся локально
- push не выполняется
- ошибка фиксируется в логах
- система продолжает работу

---

## 5. Backup Tests

### BT-01 — Создание резервной копии

**Given**  
Проект активен

**When**  
Создан коммит

**Then**
- проект синхронизируется в backup folder
- структура проекта сохраняется
- `.git` не копируется

---

### BT-02 — Обновление резервной копии

**Given**  
Резервная копия уже существует

**When**  
В проекте появляются изменения

**Then**
- резерв обновляется
- старые файлы заменяются новыми
- удалённые файлы отражаются в резерве

---

## 6. Failure & Recovery Tests

### FR-01 — Падение приложения

**Given**  
DevSafe работает

**When**  
Приложение аварийно закрывается

**Then**
- файлы проекта не повреждены
- git-репозиторий цел
- после перезапуска состояние восстанавливается

---

### FR-02 — Перезапуск системы

**Given**  
Проект был активен

**When**  
Windows перезапускается

**Then**
- DevSafe запускается
- конфигурация проектов сохранена
- проект можно снова активировать

---

### FR-03 — Потеря рабочей папки

**Given**  
Проект был активен

**When**  
Рабочая папка удалена пользователем

**Then**
- проект можно восстановить из backup folder
- либо восстановить через GitHub clone

---

## 7. UX Tests

### UX-01 — Прозрачность состояния

**Given**  
DevSafe работает

**Then**
- пользователь всегда видит:
  - активный проект
  - текущий статус
  - последние действия

---

### UX-02 — Безопасность действий

**Given**  
Проект активен

**When**  
Пользователь пытается удалить активный проект

**Then**
- требуется подтверждение
- без подтверждения действие не выполняется

---

## 8. Definition of Done (Test Completion)

Реализация считается завершённой, если:

- ✅ все Acceptance Tests пройдены
- ✅ Git и Backup тесты проходят стабильно
- ✅ система переживает сбои без потери данных
- ✅ поведение соответствует ТЗ

---

## 9. Явно вне тестирования (на данном этапе)

- шифрование резервов
- сетевые файловые системы
- более 5 проектов
- нагрузочное тестирование

---
